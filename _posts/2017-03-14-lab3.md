---
layout:  post
title:   Lab 3
tagline: Automaton transformations
---

# λ-NFA to NFA

Starting from a λ-NFA, build an equivalent NFA by removing  its λ-transitions.

The idea: from state $q$ if we can reach $r$ through `λ` and $r$ can reach $s$ through `a`

- $q\xrightarrow{\lambda}r$
- $r\xrightarrow{a}s$

It means $q$ can reach $s$ through `a`.

- $q\xrightarrow{a}s$


## Starting automaton

We will transform the following λ-NFA $A$:

![l-nfa](assets/l-nfa-original.svg)

Language: $(ab)*$. Example accepted words: `ab`, `abab`, `ababab`, `λ`. Transition table:

| $\delta$   | **a** | **b** | $\bf{\lambda}$ |
| ---------- | :---: | :---: | :------------: |
| $\bf{q_0}$ |       |       |   $q_1,q_5$    |
| $\bf{q_1}$ | $q_2$ |       |                |
| $\bf{q_2}$ |       |       |     $q_3$      |
| $\bf{q_3}$ |       | $q_4$ |                |
| $\bf{q_4}$ |       |       |   $q_1,q_5$    |
| $\bf{q_5}$ |       |       |                |

## λ-closure

The states that $q$ can reach only by λ-transitions.

 $q$ is always in its λ-closure — by doing no transitions, we stay in the same state.

| state      | $\bf{\lambda *}$ |
| ---------- | :--------------- |
| $\bf{q_0}$ | $q_0, q_1, q_5$  |
| $\bf{q_1}$ | $q_1$            |
| $\bf{q_2}$ | $q_2, q_3$       |
| $\bf{q_3}$ | $q_3$            |
| $\bf{q_4}$ | $q_4, q_5, q_1$  |
| $\bf{q_5}$ | $q_5$            |

**Attention**: the λ-closure does not include only states reachable in one λ-transition, it also includes states λ-reachable from those states as well. Example:

- $q\xrightarrow{\lambda}r$
- $r\xrightarrow{\lambda}s$

That means $q$ can reach $s$ through `λ*`, $s \in λ \text{-} closure(q)$.



## Transition function

A state $q$ with symbol $x$ can reach *all* the states resulted from computing:
$$
\lambda{*} \ x\ \ \lambda*
$$
In our case, $x$ can be either `a` or `b`.

### For symbol `a`

| $\delta_a'$ | $\bf{\lambda *}$ |   a   | $\bf{\lambda *}$ |
| ----------- | :--------------: | :---: | :--------------: |
| $\bf{q_0}$  | $q_0, q_1, q_5$  | $q_2$ |    $q_2, q_3$    |
| $\bf{q_1}$  |      $q_1$       | $q_2$ |    $q_2, q_3$    |
| $\bf{q_2}$  |    $q_2, q_3$    |       |                  |
| $\bf{q_3}$  |      $q_3$       |       |                  |
| $\bf{q_4}$  | $q_4, q_5, q_1$  | $q_2$ |    $q_2, q_3$    |
| $\bf{q_5}$  |      $q_5$       |       |                  |

The first column is actually the λ-closure.

For the first row ($q0$), the second column contains all the states reachable from $q_0$ and $q_1$ ($λ \text{-} closure(q_0)$) with `a`. For the third row ($q_2$), the second column contains nothing as neither $q_2$ nor $q_3$ can reach anything with `a`.

To get the last column, we combine the λ-closures of all the states in the `a` column. Since the rows for $q2$, $q_3$ and $q_5$ are blank on the `a` column, they will be blank in the last column as well.

### For symbol `b`

| $\delta_b'$ | $\bf{\lambda *}$ |   b   | $\bf{\lambda *}$ |
| ----------- | :--------------: | :---: | :--------------: |
| $\bf{q_0}$  | $q_0, q_1, q_5$  |       |                  |
| $\bf{q_1}$  |      $q_1$       |       |                  |
| $\bf{q_2}$  |    $q_2, q_3$    | $q_4$ | $q_4, q_5, q_1$  |
| $\bf{q_3}$  |      $q_3$       |       |                  |
| $\bf{q_4}$  | $q_4, q_5, q_1$  |       |                  |
| $\bf{q_5}$  |      $q_5$       |       |                  |

Only the row containing $q_3$ in its λ-closure needs to be completed, as $q_3$ is the only function that can transition on `b`.

## Transition table

Looking at the last column in table `a`, we see that $q_0$ can reach $q_2$ and $q_3$ (and so can $q_1$ and $q_4$). For symbol `b`, $q_2$ can reach $q_1$, $q_4$ and $q_5$.

| $\delta'$  |     a      |        b        |
| ---------- | :--------: | :-------------: |
| $\bf{q_0}$ | $q_2, q_3$ |                 |
| $\bf{q_1}$ | $q_2, q_3$ |                 |
| $\bf{q_2}$ |            | $q_1, q_4, q_5$ |
| $\bf{q_3}$ |            |                 |
| $\bf{q_4}$ | $q_2, q_3$ |                 |
| $\bf{q_5}$ |            |                 |



## Starting and accepting states

The starting state remains $q_0$.

A state  is accepting iff it has an accepting state (in the original NFA) in its λ-closure. In our case, the original NFA had only one accepting state, $q_5$ can reach be reached through  `λ` from $q_1$ or $q_4$ (or itself).



## Transformed automaton

The states $q_3$ and $q_5$ can be dropped as they have no outward transitions and behave like junk states.

| $\delta'$                          |   a   |     b      |
| :--------------------------------- | :---: | :--------: |
| $\rightarrow \underline{\bf{q_0}}$ | $q_2$ |            |
| $\bf{q_1}$                         | $q_2$ |            |
| $\bf{q_2}$                         |       | $q_1, q_4$ |
| $\underline{\bf{q_4}}$             | $q_2$ |            |

We obtained a much simpler automaton for the same language $(ab)*$

![nfa](assets/l-nfa-transformed.svg)



## More examples

For some more narrated transformations I recommend the following videos:

- [basic example](https://youtu.be/I6GFKekMr7s)
- [more complex example](https://youtu.be/Jz4YQ09nOxA)
- [different explanation](https://youtu.be/oEraHUCwFVU)



# NFA to DFA
